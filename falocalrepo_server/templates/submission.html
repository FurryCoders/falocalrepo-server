<!DOCTYPE html>
<!--suppress HtmlDeprecatedAttribute, HtmlUnknownTarget, CssUnusedSymbol -->
<html lang="en">
<head>
    <title>{{ title }} Â· {{ app }}</title>
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport">
    <meta content="ie=edge" http-equiv="x-ua-compatible">
    <link rel="shortcut icon" href="/static/favicon.ico">
    <link rel="icon" href="/static/touch-icon.png">
    <link rel="apple-touch-icon" href="/static/apple-touch-icon.png">
    <link rel="apple-touch-icon-precomposed" href="/static/apple-touch-icon-precomposed.png">
    <link rel="stylesheet" href="/static/styles/bootstrap.min.css">
    <link rel="stylesheet" href="/static/styles/style.css">
    <style>
        #submission_description {
            text-align: justify;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #submission_description .bbcode_center {
            width: 100%;
            margin: auto;
            text-align: center;
            font-family: inherit;
        }
    </style>
</head>
<body class="mt-4 mb-4">

<div class="container">
    <div class="row align-middle">
        {% if submission["FILESAVED"] < 2 %}
        <div class="col-8 d-none d-lg-block align-middle text-center mt-5 pt-5" id="submission_file">
            <p class="badge bg-danger"><b>Submission has no file</b></p>
        </div>
        {% elif submission["TYPE"].lower() == "image" %}
        <div class="col-8 d-none d-lg-block text-center" id="submission_file">
            <a href="/submission/{{ submission["ID"] }}/file/{{ filename_id }}">
                <img class="img-fluid mx-auto"
                     src="/submission/{{ submission["ID"] }}/file/{{ filename_id }}" alt=""
                     onerror="this.onload = null; this.src = '/static/not-found.png'">
            </a>
        </div>
        {% elif submission["TYPE"].lower() == "music" %}
        <div class="col-8 d-none d-lg-block align-middle text-center mt-5 pt-5" id="submission_file">
            <img class="rounded" src="/submission/{{ submission["ID"] }}/thumbnail" alt=""
                 onerror="this.src = '/static/not-found.png'">
            <br>
            <audio class="mt-1" src="/submission/{{ submission["ID"] }}/file/{{ filename_id }}" controls>
                File not found
            </audio>
        </div>
        {% elif file_text is not none %}
        <div class="col-8 d-none d-lg-block text-center submission-text">
            <div class="border rounded p-2 text-start font-monospace small overflow-scroll text-wrap fit-height">
                {% autoescape false %}{{ file_text.strip() }}{% endautoescape %}
            </div>
        </div>
        {% else %}
        <div class="col-8 d-none d-lg-block align-middle text-center mt-5 pt-5" id="submission_file">
            <img class="rounded" src="/submission/{{ submission["ID"] }}/thumbnail" alt=""
                 onerror="this.src = '/static/not-found.png'">
            <br>
            <a class="mt-1 btn btn-sm btn-primary" href="/submission/{{ submission["ID"] }}/file/{{ filename_id }}">
                {{ filename|title }}
            </a>
        </div>
        {% endif %}

        <div class="col-12 col-lg-4 mx-auto" id="submission_metadata">
            <div class="card h-100">
                <h2 class="card-header">{{ submission["TITLE"] }}</h2>
                <div class="d-lg-none border-bottom text-center">
                    {% if submission["FILESAVED"] < 2 %}
                    <div class="mt-2 ms-1 me-1">
                        <span class="badge bg-danger overflow-hidden w-100">Submission has no file</span>
                    </div>
                    {% elif submission["TYPE"].lower() == "image" %}
                    <a href="/submission/{{ submission["ID"] }}/file/{{ filename_id }}">
                        <img class="img-fluid mx-auto fit-height"
                             src="/submission/{{ submission["ID"] }}/file/{{ filename_id }}" alt=""
                             onerror="this.onload = null; this.src = '/static/not-found.png'">
                    </a>
                    {% elif submission["TYPE"].lower() == "music" %}
                    <div class="m-1">
                        <img class="rounded" src="/submission/{{ submission["ID"] }}/thumbnail" alt=""
                             onerror="this.src = '/static/not-found.png'">
                        <br>
                        <audio class="mt-1" src="/submission/{{ submission["ID"] }}/file/{{ filename_id }}" controls>
                            File not found
                        </audio>
                    </div>
                    {% elif file_text is not none %}
                    <div class="p-2 text-start font-monospace small overflow-scroll text-wrap fit-height submission-text">
                        {% autoescape false %}{{ file_text.strip() }}{% endautoescape %}
                    </div>
                    {% else %}
                    <div class="m-1">
                        <img class="rounded" src="/submission/{{ submission["ID"] }}/thumbnail" alt=""
                             onerror="this.src = '/static/not-found.png'">
                        <br>
                        <a class="mt-1 btn btn-sm btn-primary"
                           href="/submission/{{ submission["ID"] }}/file/{{ filename_id }}">
                            {{ filename|title }}
                        </a>
                    </div>
                    {% endif %}
                </div>
                <div class="card-body">
                    <div class="row">
                        <h6 class="col-4 card-title">Author</h6>
                        <div class="col-8 card-text">
                            <a class="btn-sm btn-primary badge w-100 overflow-hidden text-decoration-none"
                               href="/user/{{ submission["AUTHOR"] }}">{{ submission["AUTHOR"] }}
                            </a>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <h6 class="col-4 card-title">Date</h6>
                        <div class="col-8 card-text">
                            <a class="btn-sm btn-primary badge overflow-hidden text-decoration-none w-100"
                               href="/search/submissions/?query=%40date%20{{ submission["DATE"].strftime("%Y-%m-%d") }}">
                                {{ submission["DATE"].strftime("%Y-%m-%d %H:%M") }}
                            </a>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <h6 class="col-4 card-title">Folder</h6>
                        <div class="col-8 card-text">
                            <a class="btn-sm btn-primary badge w-100 overflow-hidden text-decoration-none"
                               href="/{{ submission["FOLDER"] }}/{{ submission["AUTHOR"] }}">
                                {{ submission["FOLDER"] }}
                            </a>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <h6 class="col-4 card-title">Category</h6>
                        <div class="col-8 card-text">
                            <a class="btn-sm btn-primary badge w-100 overflow-hidden text-decoration-none"
                               href="/search/submissions/?query=%40category%20%22{{ submission["CATEGORY"] }}%22">
                                {{ submission["CATEGORY"] }}
                            </a>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <h6 class="col-4 card-title">Species</h6>
                        <div class="col-8 card-text">
                            <a class="btn-sm btn-primary badge w-100 overflow-hidden text-decoration-none"
                               href="/search/submissions/?query=%40species%20%22{{ submission["SPECIES"] }}%22">
                                {{ submission["SPECIES"] }}
                            </a>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <h6 class="col-4 card-title">Gender</h6>
                        <div class="col-8 card-text">
                            <a class="btn-sm btn-primary badge w-100 overflow-hidden text-decoration-none"
                               href="/search/submissions/?query=%40gender%20%22{{ submission["GENDER"] }}%22">
                                {{ submission["GENDER"] }}
                            </a>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <h6 class="col-4 card-title">Rating</h6>
                        <div class="col-8 card-text">
                            <a class="btn-sm btn-primary badge w-100 overflow-hidden text-decoration-none"
                               href="/search/submissions/?query=%40rating%20%22{{ submission["RATING"] }}%22">
                                {{ submission["RATING"] }}
                            </a>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <h6 class="col-4 card-title">Tags</h6>
                        <div class="col-8 card-text">
                            {% for tag in submission["TAGS"] %}
                                <a class="badge bg-primary bg-link overflow-hidden text-decoration-none"
                                   href='/search/submissions/?query=%40tags%20%22%7C{{ tag }}%7C%22'>{{ tag }}</a>
                            {% endfor %}
                            {% if not submission["TAGS"] %}
                                <span class="badge bg-danger w-100 overflow-hidden">No tags</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="row mt-1">
                        <h6 class="col-4 card-title">Favorites</h6>
                        <div class="col-8 card-text">
                            {% for user in submission["FAVORITE"] %}
                                <a class="badge bg-primary bg-link overflow-hidden text-decoration-none"
                                   href="/user/{{ user }}">{{ user }}</a>
                            {% endfor %}
                            {% if not submission["FAVORITE"] %}
                                <span class="badge bg-danger w-100 overflow-hidden">No favorites</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="row mt-1">
                        <h6 class="col-4 card-title">Mentions</h6>
                        <div class="col-8 card-text">
                            {% for user in submission["MENTIONS"] %}
                                <a class="badge bg-primary bg-link overflow-hidden text-decoration-none"
                                   href="/user/{{ user }}">{{ user }}</a>
                            {% endfor %}
                            {% if not submission["MENTIONS"] %}
                                <span class="badge bg-danger w-100 overflow-hidden">No mentions</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="card-footer text-center">
                    <div class="btn-group" role="group">
                        <a class="btn btn-sm btn-primary {{ "disabled" if submission["FILESAVED"] < 2 }}"
                           href="/submission/{{ submission["ID"] }}/file/{{ filename_id }}" download>
                            Download File
                        </a>
                        <span class="btn-separator"></span>
                        <a class="btn btn-sm btn-primary"
                           href="/submission/{{ submission["ID"] }}/zip/submission-{{ "{0:010}".format(submission["ID"]) }}.zip">
                            Download as ZIP
                        </a>
                    </div>
                    <br>
                    <a class="btn btn-sm btn-primary mt-1"
                       href="https://www.furaffinity.net/view/{{ submission["ID"] }}">
                        Open on Fur Affinity
                    </a>
                    <br>
                    <div class="btn-group mt-1" role="group">
                        <a class="btn btn-sm btn-primary {{ "disabled" if not next }}" href="/submission/{{ next }}">
                            Next
                        </a>
                        <span class="btn-separator"></span>
                        <a class="btn btn-sm btn-primary" href="/gallery/{{ submission["AUTHOR"] }}">Gallery </a>
                        <span class="btn-separator"></span>
                        <a class="btn btn-sm btn-primary" href="/submissions/{{ submission["AUTHOR"] }}">All </a>
                        <span class="btn-separator"></span>
                        <a class="btn btn-sm btn-primary" href="/scraps/{{ submission["AUTHOR"] }}">Scraps </a>
                        <span class="btn-separator"></span>
                        <a class="btn btn-sm btn-primary {{ "disabled" if not prev }}" href="/submission/{{ prev }}">
                            Prev
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-12">
            <div class="card">
                <div class="card-body col-12 col-lg-8 mx-auto">
                    <div class="card-text" id="submission_description">
                        {% autoescape false %}{{ submission["DESCRIPTION"] }}{% endautoescape %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
